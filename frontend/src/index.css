*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html,
body,
#root {
  height: 100%;
}

/* === Theme Variables === */
:root {
  /* Text */
  --color-text-primary: #1a1a1a;
  --color-text-secondary: #333;
  --color-text-tertiary: #555;
  --color-text-muted: #666;
  --color-text-faint: #888;
  --color-text-placeholder: #999;

  /* Backgrounds */
  --color-bg-body: #fafafa;
  --color-bg-surface: #fff;
  --color-bg-sidebar: #f0f0f0;
  --color-bg-elevated: #f5f5f5;
  --color-bg-inset: #f8f8f8;
  --color-bg-button: #e8e8e8;
  --color-bg-hover: #e0e0e0;
  --color-bg-active: #d0d8e8;
  --color-bg-highlight: #f0f4ff;

  /* Borders */
  --color-border-primary: #ddd;
  --color-border-secondary: #ccc;
  --color-border-light: #eee;
  --color-border-subtle: #e0e0e0;
  --color-border-divider: #f0f0f0;

  /* Accent */
  --color-accent: #4a7dff;
  --color-accent-hover: #3a6de8;
  --color-accent-text: #fff;
  --color-accent-bg-light: rgba(74, 125, 255, 0.2);

  /* Semantic: Success */
  --color-success-bg: #e8f5e9;
  --color-success-text: #2e7d32;

  /* Semantic: Info */
  --color-info-bg: #e3f2fd;
  --color-info-text: #1565c0;
  --color-info-bg-hover: #bbdefb;

  /* Semantic: Warning */
  --color-warning-bg: #fff3e0;
  --color-warning-text: #e65100;
  --color-warning-border: #ffcc80;

  /* Semantic: Error */
  --color-error-text: #d32f2f;

  /* Diff */
  --color-diff-add-bg: #e6ffec;
  --color-diff-add-text: #1a7f37;
  --color-diff-del-bg: #ffebe9;
  --color-diff-del-text: #cf222e;
  --color-diff-mod-bg: #ddf4ff;
  --color-diff-mod-text: #0969da;

  /* Search highlight */
  --color-search-highlight-bg: #fff3b0;
  --color-search-highlight-text: #1a1a1a;

  /* Shadows */
  --color-shadow: rgba(0, 0, 0, 0.15);
  --color-shadow-heavy: rgba(0, 0, 0, 0.2);
  --color-shadow-overlay: rgba(0, 0, 0, 0.4);
  --color-shadow-modal: rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] {
  color-scheme: dark;

  /* Text */
  --color-text-primary: #e0e0e0;
  --color-text-secondary: #d0d0d0;
  --color-text-tertiary: #b0b0b0;
  --color-text-muted: #a0a0a0;
  --color-text-faint: #808080;
  --color-text-placeholder: #707070;

  /* Backgrounds */
  --color-bg-body: #1a1a1e;
  --color-bg-surface: #242428;
  --color-bg-sidebar: #1e1e22;
  --color-bg-elevated: #2a2a2e;
  --color-bg-inset: #202024;
  --color-bg-button: #3a3a3e;
  --color-bg-hover: #3e3e44;
  --color-bg-active: #3a4458;
  --color-bg-highlight: #2a3040;

  /* Borders */
  --color-border-primary: #3a3a3e;
  --color-border-secondary: #444448;
  --color-border-light: #2e2e32;
  --color-border-subtle: #363638;
  --color-border-divider: #2a2a2e;

  /* Accent */
  --color-accent: #5b8eff;
  --color-accent-hover: #6b9eff;
  --color-accent-text: #fff;
  --color-accent-bg-light: rgba(91, 142, 255, 0.2);

  /* Semantic: Success */
  --color-success-bg: #1a3a20;
  --color-success-text: #6fcf7c;

  /* Semantic: Info */
  --color-info-bg: #1a2a3a;
  --color-info-text: #64b5f6;
  --color-info-bg-hover: #1e3448;

  /* Semantic: Warning */
  --color-warning-bg: #3a2a1a;
  --color-warning-text: #ffb74d;
  --color-warning-border: #5a4020;

  /* Semantic: Error */
  --color-error-text: #ef5350;

  /* Diff */
  --color-diff-add-bg: #1a3020;
  --color-diff-add-text: #6fcf7c;
  --color-diff-del-bg: #3a1a1a;
  --color-diff-del-text: #f06060;
  --color-diff-mod-bg: #1a2a3a;
  --color-diff-mod-text: #64b5f6;

  /* Search highlight */
  --color-search-highlight-bg: #5a4a10;
  --color-search-highlight-text: #e0e0e0;

  /* Shadows */
  --color-shadow: rgba(0, 0, 0, 0.3);
  --color-shadow-heavy: rgba(0, 0, 0, 0.4);
  --color-shadow-overlay: rgba(0, 0, 0, 0.6);
  --color-shadow-modal: rgba(0, 0, 0, 0.5);
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Helvetica Neue", Arial, sans-serif;
  color: var(--color-text-primary);
  background: var(--color-bg-body);
}

/* Theme transition */
body,
.sidebar,
.editor-area,
.editor-toolbar {
  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

/* Dark mode: Milkdown overrides */
[data-theme="dark"] .milkdown,
[data-theme="dark"] .milkdown .ProseMirror {
  background: var(--color-bg-surface);
  color: var(--color-text-primary);
}

[data-theme="dark"] .milkdown .ProseMirror code {
  background: var(--color-bg-elevated);
}

[data-theme="dark"] .milkdown .ProseMirror pre {
  background: var(--color-bg-elevated);
}

[data-theme="dark"] .milkdown .ProseMirror blockquote {
  border-left-color: var(--color-border-primary);
  color: var(--color-text-muted);
}

[data-theme="dark"] .milkdown .ProseMirror hr {
  border-color: var(--color-border-primary);
}

[data-theme="dark"] .milkdown .ProseMirror a {
  color: var(--color-accent);
}

[data-theme="dark"] .milkdown .ProseMirror table td,
[data-theme="dark"] .milkdown .ProseMirror table th {
  border-color: var(--color-border-primary);
}

[data-theme="dark"] .milkdown .ProseMirror table th {
  background: var(--color-bg-elevated);
}

/* Dark mode: form elements */
[data-theme="dark"] input,
[data-theme="dark"] select,
[data-theme="dark"] textarea {
  background: var(--color-bg-elevated);
  color: var(--color-text-primary);
  border-color: var(--color-border-primary);
}
