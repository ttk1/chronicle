*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html,
body,
#root {
  height: 100%;
}

/* === Theme Variables === */
:root {
  /* Text */
  --color-text-primary: #1a1a1a;
  --color-text-secondary: #333;
  --color-text-tertiary: #555;
  --color-text-muted: #666;
  --color-text-faint: #888;
  --color-text-placeholder: #999;

  /* Backgrounds */
  --color-bg-body: #fafafa;
  --color-bg-surface: #fff;
  --color-bg-sidebar: #f0f0f0;
  --color-bg-elevated: #f5f5f5;
  --color-bg-inset: #f8f8f8;
  --color-bg-button: #e8e8e8;
  --color-bg-hover: #e0e0e0;
  --color-bg-active: #d0d8e8;
  --color-bg-highlight: #f0f4ff;

  /* Borders */
  --color-border-primary: #ddd;
  --color-border-secondary: #ccc;
  --color-border-light: #eee;
  --color-border-subtle: #e0e0e0;
  --color-border-divider: #f0f0f0;

  /* Accent */
  --color-accent: #4a7dff;
  --color-accent-hover: #3a6de8;
  --color-accent-text: #fff;
  --color-accent-bg-light: rgba(74, 125, 255, 0.2);

  /* Semantic: Success */
  --color-success-bg: #e8f5e9;
  --color-success-text: #2e7d32;

  /* Semantic: Info */
  --color-info-bg: #e3f2fd;
  --color-info-text: #1565c0;
  --color-info-bg-hover: #bbdefb;

  /* Semantic: Warning */
  --color-warning-bg: #fff3e0;
  --color-warning-text: #e65100;
  --color-warning-border: #ffcc80;

  /* Semantic: Error */
  --color-error-text: #d32f2f;

  /* Diff */
  --color-diff-add-bg: #e6ffec;
  --color-diff-add-text: #1a7f37;
  --color-diff-del-bg: #ffebe9;
  --color-diff-del-text: #cf222e;
  --color-diff-mod-bg: #ddf4ff;
  --color-diff-mod-text: #0969da;

  /* Gutter indicators */
  --color-gutter-unsaved: #e2b340;
  --color-gutter-uncommitted: #2ea043;
  --color-gutter-deleted: #d32f2f;

  /* Search highlight */
  --color-search-highlight-bg: #fff3b0;
  --color-search-highlight-text: #1a1a1a;

  /* Shadows */
  --color-shadow: rgba(0, 0, 0, 0.15);
  --color-shadow-heavy: rgba(0, 0, 0, 0.2);
  --color-shadow-overlay: rgba(0, 0, 0, 0.4);
  --color-shadow-modal: rgba(0, 0, 0, 0.3);

  /* Code syntax highlighting (highlight.js) */
  --hljs-bg: #f6f8fa;
  --hljs-color: #24292e;
  --hljs-keyword: #d73a49;
  --hljs-string: #032f62;
  --hljs-number: #005cc5;
  --hljs-comment: #6a737d;
  --hljs-function: #6f42c1;
  --hljs-class: #22863a;
  --hljs-tag: #22863a;
  --hljs-attr: #6f42c1;
  --hljs-built-in: #005cc5;
  --hljs-meta: #735c0f;
  --hljs-deletion: #b31d28;
  --hljs-addition: #22863a;

  /* Markdown source editor syntax tokens */
  --md-heading-color: #0550ae;
  --md-bold-color: #24292e;
  --md-italic-color: #6f42c1;
  --md-code-color: #d73a49;
  --md-link-color: #0969da;
  --md-image-color: #8250df;
  --md-quote-color: #57606a;
  --md-list-marker-color: #d73a49;
  --md-hr-color: #d0d7de;
  --md-frontmatter-color: #6e7781;
}

[data-theme="dark"] {
  color-scheme: dark;

  /* Text */
  --color-text-primary: #e0e0e0;
  --color-text-secondary: #d0d0d0;
  --color-text-tertiary: #b0b0b0;
  --color-text-muted: #a0a0a0;
  --color-text-faint: #808080;
  --color-text-placeholder: #707070;

  /* Backgrounds */
  --color-bg-body: #1a1a1e;
  --color-bg-surface: #242428;
  --color-bg-sidebar: #1e1e22;
  --color-bg-elevated: #2a2a2e;
  --color-bg-inset: #202024;
  --color-bg-button: #3a3a3e;
  --color-bg-hover: #3e3e44;
  --color-bg-active: #3a4458;
  --color-bg-highlight: #2a3040;

  /* Borders */
  --color-border-primary: #3a3a3e;
  --color-border-secondary: #444448;
  --color-border-light: #2e2e32;
  --color-border-subtle: #363638;
  --color-border-divider: #2a2a2e;

  /* Accent */
  --color-accent: #5b8eff;
  --color-accent-hover: #6b9eff;
  --color-accent-text: #fff;
  --color-accent-bg-light: rgba(91, 142, 255, 0.2);

  /* Semantic: Success */
  --color-success-bg: #1a3a20;
  --color-success-text: #6fcf7c;

  /* Semantic: Info */
  --color-info-bg: #1a2a3a;
  --color-info-text: #64b5f6;
  --color-info-bg-hover: #1e3448;

  /* Semantic: Warning */
  --color-warning-bg: #3a2a1a;
  --color-warning-text: #ffb74d;
  --color-warning-border: #5a4020;

  /* Semantic: Error */
  --color-error-text: #ef5350;

  /* Diff */
  --color-diff-add-bg: #1a3020;
  --color-diff-add-text: #6fcf7c;
  --color-diff-del-bg: #3a1a1a;
  --color-diff-del-text: #f06060;
  --color-diff-mod-bg: #1a2a3a;
  --color-diff-mod-text: #64b5f6;

  /* Gutter indicators */
  --color-gutter-unsaved: #cca030;
  --color-gutter-uncommitted: #3fb950;
  --color-gutter-deleted: #f85149;

  /* Search highlight */
  --color-search-highlight-bg: #5a4a10;
  --color-search-highlight-text: #e0e0e0;

  /* Shadows */
  --color-shadow: rgba(0, 0, 0, 0.3);
  --color-shadow-heavy: rgba(0, 0, 0, 0.4);
  --color-shadow-overlay: rgba(0, 0, 0, 0.6);
  --color-shadow-modal: rgba(0, 0, 0, 0.5);

  /* Code syntax highlighting (highlight.js) */
  --hljs-bg: #2a2a2e;
  --hljs-color: #e0e0e0;
  --hljs-keyword: #ff7b72;
  --hljs-string: #a5d6ff;
  --hljs-number: #79c0ff;
  --hljs-comment: #8b949e;
  --hljs-function: #d2a8ff;
  --hljs-class: #7ee787;
  --hljs-tag: #7ee787;
  --hljs-attr: #d2a8ff;
  --hljs-built-in: #79c0ff;
  --hljs-meta: #d29922;
  --hljs-deletion: #ffa198;
  --hljs-addition: #7ee787;

  /* Markdown source editor syntax tokens */
  --md-heading-color: #79c0ff;
  --md-bold-color: #e0e0e0;
  --md-italic-color: #d2a8ff;
  --md-code-color: #ff7b72;
  --md-link-color: #58a6ff;
  --md-image-color: #bc8cff;
  --md-quote-color: #8b949e;
  --md-list-marker-color: #ff7b72;
  --md-hr-color: #484f58;
  --md-frontmatter-color: #8b949e;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Helvetica Neue", Arial, sans-serif;
  color: var(--color-text-primary);
  background: var(--color-bg-body);
}

/* Theme transition */
body,
.sidebar,
.editor-area,
.editor-toolbar {
  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

/* highlight.js theme (CSS variable based) */
.hljs {
  background: var(--hljs-bg);
  color: var(--hljs-color);
}
.hljs-keyword,
.hljs-selector-tag,
.hljs-literal,
.hljs-type { color: var(--hljs-keyword); }
.hljs-string,
.hljs-template-variable,
.hljs-regexp { color: var(--hljs-string); }
.hljs-number { color: var(--hljs-number); }
.hljs-comment,
.hljs-doctag { color: var(--hljs-comment); font-style: italic; }
.hljs-title.function_,
.hljs-title { color: var(--hljs-function); }
.hljs-title.class_,
.hljs-variable.language_ { color: var(--hljs-class); }
.hljs-tag { color: var(--hljs-tag); }
.hljs-attr,
.hljs-attribute { color: var(--hljs-attr); }
.hljs-built_in,
.hljs-variable.constant_ { color: var(--hljs-built-in); }
.hljs-meta,
.hljs-symbol { color: var(--hljs-meta); }
.hljs-deletion { color: var(--hljs-deletion); }
.hljs-addition { color: var(--hljs-addition); }
.hljs-section { color: var(--hljs-keyword); font-weight: bold; }
.hljs-emphasis { font-style: italic; }
.hljs-strong { font-weight: bold; }

/* Dark mode: form elements */
[data-theme="dark"] input,
[data-theme="dark"] select,
[data-theme="dark"] textarea:not(.markdown-source-editor) {
  background: var(--color-bg-elevated);
  color: var(--color-text-primary);
  border-color: var(--color-border-primary);
}
